// Generated by CoffeeScript 1.7.1
(function() {
  "use strict";
  var Pubsub;

  Pubsub = (function() {
    function Pubsub() {}

    Pubsub.prototype.engage = function(service, events) {
      service.events = events;
      service.handlers = {};
      service.handlersNames = {};
      service.on = function(event, handler, name) {
        var i;
        if (!this.handlers[event]) {
          this.handlers[event] = [];
          this.handlersNames[event] = [];
        }
        this.handlers[event].push(handler);
        if (name) {
          i = _.indexOf(this.handlersNames[event], name);
          if (i >= 0) {
            this.handlers[event].splice(i, 1);
            this.handlersNames[event].splice(i, 1);
          }
          return this.handlersNames[event].push(name);
        }
      };
      service.notify = function(event, message) {
        return _.each(this.handlers[event], function(handler) {
          return handler(message);
        });
      };
      return service.removeEvent = function(event, name) {
        var i;
        i = _.indexOf(this.handlersNames[event], name);
        if (i >= 0) {
          this.handlers[event].splice(i, 1);
          return this.handlersNames[event].splice(i, 1);
        }
      };
    };

    return Pubsub;

  })();

  angular.module("wordsApp").service("Pubsub", Pubsub);

}).call(this);
